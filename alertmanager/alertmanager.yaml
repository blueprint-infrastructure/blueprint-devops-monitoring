alertmanager_config: |
  global:
    resolve_timeout: 5m

  # Routing tree
  route:
    receiver: 'default'
    group_by: ['alertname', 'cluster', 'service']
    group_wait: 10s
    group_interval: 10s
    repeat_interval: 12h
    routes:
      - match:
          severity: critical
        receiver: 'critical'
        continue: false
      - match:
          severity: warning
        receiver: 'warning'
        continue: false

  # Inhibition rules
  inhibit_rules:
    - source_match:
        severity: 'critical'
      target_match:
        severity: 'warning'
      equal: ['alertname', 'instance']

  # Receivers - Configure with your SNS topic ARNs
  # See: https://docs.aws.amazon.com/prometheus/latest/userguide/AMP-alertmanager-receiver-config.html
  receivers:
    - name: 'default'
      # Default receiver - replace with your SNS topic ARN
      # sns_configs:
      #   - topic_arn: 'arn:aws:sns:us-east-1:123456789012:alerts'
      #     sigv4:
      #       region: 'us-east-1'

    - name: 'critical'
      # Critical alerts - replace with your SNS topic ARN
      # sns_configs:
      #   - topic_arn: 'arn:aws:sns:us-east-1:123456789012:critical-alerts'
      #     sigv4:
      #       region: 'us-east-1'

    - name: 'warning'
      # Warning alerts - replace with your SNS topic ARN
      # sns_configs:
      #   - topic_arn: 'arn:aws:sns:us-east-1:123456789012:warning-alerts'
      #     sigv4:
      #       region: 'us-east-1'
